## 复习笔记

### 单例模式

- 饿汉模式实现
- 直接定义静态对象
- **优点：** 实现简单，多线程安全。 

```c++
///////////////////  内部静态变量的懒汉实现（C++11 线程安全）////////////////// 
class Single { 
  public: 
    // 获取单实例对象 
    static Single &GetInstance(){ 
      // 局部静态特性的方式实现单实例 
      static Single signal; // 如果含有数据成员，需要修改构造函数对数据进行初始化 
      return signal; 
    } 
    // 还需要定义一些外部函数 
  private: 
    // 禁止外部构造 
    Single(); 
    // 禁止外部析构 
    ~Single(); 
    // 禁止外部复制构造 
    Single(const Single &signal); 
    // 禁止外部赋值操作 
    const Single &operator=(const Single &signal); 
  }; 
  ///////////////////  内部静态变量的懒汉实现  ////////////////// 
```

## C++ 自由存储区与堆
谈到自由存储区与堆的区别，就需要了解new与malloc的区别。

实际上堆是C语言的关键术语，是操作系统所维护的一块特殊内存，它提供了动态分配的功能。用户使用malloc进行堆内存申请，使用free实现堆内存的释放。

但自由存储区不同，它是C++中的一个抽象的概念。C++中规定使用new/delete申请和释放的的区域被称为自由存储区。因此，自由存储区的实际位置和new/delete申请/释放的位置有关。大部分编译器中new申请空间都是由malloc实现，默认是在堆上实现自由存储。但是用户也可以通过重载new在其他内存区域（例如全局区）实现数据的自由存储，此区域也将成为自由存储区。

总结，自由存储区不等于堆区，堆是操作系统所维护的一块特殊内存，自由存储区是一种抽象概念，使用new/delete申请和释放的的区域都被称为自由存储区。
