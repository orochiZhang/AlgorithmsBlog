# IP地址分类
IP地址分为A，B，C，D，E类地址
### A类地址 
1. A类IP地址。由1个字节的网络地址和3个字节的主机地址，网络 地址的最高位必须是“0”。  如：0XXXXXXX.XXXXXXXX.XXXXXXXX.XXXXXXXX（X代表0或1）   
2. A类IP地址范围：1.0.0.1---126.255.255.254           
3. 10.X.X.X是私有地址（所谓的私有地址就是在互联网上不使用，而被用在局域网络中的地址）。范围是10.0.0.0--10.255.255.255     
4. 127.X.X.X是保留地址，用做循环测试用的。

### B类地址  
1. B类IP地址。由2个字节的网络地址和2个字节的主机地址，网络地 址的最高位必须是“10”。 
 如：10XXXXXX.XXXXXXXX.XXXXXXXX.XXXXXXXX（X代表0或1）  
2. B类IP地址范围：128.0.0.1---191.255.255.254。 
3. B类私有地址范围是172.16.0.0--172.31.255.255。   
4. 169.254.X.X是保留地址。如果你的IP地址是自动获取IP地址， 而你在网络上又没有找到可用的DHCP服务器。就会得到其中一个IP。191.255.255.255是广播地址，不能分配。

### C类地址 
1. C类IP地址。由3个字节的网络地址和1个字节的主机地址，网络地址的最高位必须是“110”。 
如：110XXXXX.XXXXXXXX.XXXXXXXX.XXXXXXXX（X代表0或1）
2. C类IP地址范围：192.0.0.1---223.255.255.254。  
3. C类私有地址范围：192.168.0.0--192.168.255.255 

### D类地址 
1. D类地址不分网络地址和主机地址，它的第1个字节的前四位固定为 1110。 
如：1110XXXX.XXXXXXXX.XXXXXXXX.XXXXXXXX（X代表0或1）    
2. D类地址范围：224.0.0.1~239.255.255.254 

### E类地址 
1. E类地址不分网络地址和主机地址，它的第1个字节的前四位固定为 1111。 
如：1111XXXX.XXXXXXXX.XXXXXXXX.XXXXXXXX（X代表0或1）   
2. E类地址范围：240.0.0.1---255.255.255.254   


# 子网掩码 
### 简介 
在因特网中A类，B类和C类IP地址经常被使用，经过网络号和主机号的层次划分，它们能适应不同的网络规模。随着计算机和网络技术的发展，小型网络越来越多，它们使用C类网络号是一种浪费。因此在实际应用中，对IP地址进行再次划分，使其第三个字节代表网号，其余部分为主机号。再次划分后的IP地址的网络号部分和主机号部分用子网掩码（也称子网屏蔽码）来区分。

子网掩码同样也以4个字节来表示，是32位二进制数值，对应于IP地址的32位二进制数值。对于IP地址的32位二进制数值。对于IP地址中的网络号都分在子网掩码中用“1”表示，对于IP地址中的主机号部分在子网掩码中用“0”表示。子网掩码的作用是用来区分网络上的主机是否在同一网络区段内，或者说，子网掩码用来区分IP地址的网络号和主机号。

缺省状态下，如果没有进行子网划分：
1. A类网络的子网掩码为255.0.0.0
2. B类网络的子网掩码为255.255.0.0
3. C类网络的子网掩码为255.255.255.0

有了子网掩码后，IP地址的标识方法如下：    
192.168.1.1 255.255.255.0或者标识成192.168.1.1/24（24表示掩码中“1”的个数） 

### 相关计算 
怎么计算子网能容纳的电脑数呢？怎么看网络标识呢？ 
#### 示例1: 计算子网掩码容量 
255.255.232.0这个子网掩码可以最多容纳多少台电脑？  

**方法**   
1. 把子网掩码转换为二进制 11111111.1111111.11101000.00000000   
2. 数数后面有几个0，一共是有11个，那就是2^11次方，等于2048      
【注意】主机号中全0是保留地址，全1是广播地址，所以它们不算可用主号地址。网络号也是一样的。子网号是可以用全0和全1的，所以这个子网掩码最多可以容纳2048-2=2046台电脑。
----
#### 示例2: 计算子网掩码 
一个教室有50台电脑，组成一个对等局域网，子网掩码设多少最合适？  

**思路**   
首先，我们从数量上看判断用ABC中的哪类IP，从50台电脑可知用C类IP最合适但是C类默认的子网掩码是255.255.255.0，可以容纳254台电脑，显然不太合适，那子网掩码设多少合适呢？   

**方法**   
1. 2n(子网掩码转换成二进制后的零的个数)>=50  
2. 从这个式子我们可以得出：n=6   
3. 所以我们就可以得出子网掩码的二进制形式：11111111.1111111.11111111.11000000   
4. 然后转换成十进形式：255.255.255.192   
5. 所以最合适的子网掩码为：255.255.255.192 
----
#### 示例3: 计算子网数 
1. 确定该IP是属于A，B，C三类中的哪一类。就可知它们的网络号A类前8位，B类前16位，C类前24位。  
2. 把子网掩码化成2进制看有多少个1，把该进制中1的个数减去第一步所得出的位数，即为子网位数。   
3. 如果子网位数为n，则从理论是讲可以划分出2n个子网。
----
#### 示例4: 计算网段标识与主机标识 
**问题**   
要怎么判断两个IP地址是同一网段的呢？

**分析**   
要想在同一网段，必需做到网络标识相同，那网络标识怎么算呢？ 各类IP的网络标识取法都是不一样的。 
A类的，只取第一段。B类，只取第一、二段。C类，只取第一、二、三段。 

**方法**   
只要把IP和子网掩码的每位数AND（与）就可以了。 AND方法：0和1=0 0和0=0 1和1=1 

**例题**   
判断IP：12.196.132.54与56.196.56.165是否在同一网段。（默认子网掩码）  
1. 转换成二进制   
IP1：12.196.132.54    
00001100.11000100.10000100.00110110    
IP2：56.196.56.165    
00111000.11000100.00111000.10100101   
子网掩码：255.0.0.0      
11111111.00000000.00000000.00000000   

2. 把IP与子网掩码进行AND运算   
IP1 AND 子网掩码=00001100.00000000.00000000.00000000   
IP2 AND 子网掩码=00111000.00000000.00000000.00000000   
3. 把得到的结果转换成十进制   
IP1的网络标识：12.0.0.0   
IP2的网络标识：56.0.0.0   
所以可知它们不是同一网段的。 
----
## 主机标识
#### 简介
子网掩码就是用以区分不同的网段，主机标识是用以区分同一网段内的不同主机。你可以简单的理解为子网掩码相当于咱中国的不同省份名字，而主机标识好比是同一个省的不同地市的名字。

#### 计算
1. 把子网掩码取反，取反后的子网掩码：00000000.11111111.11111111.11111111  
2. 把它与IP进行AND运算   
IP1  AND 子网掩码=00000000.11000100.10000100.00110110   
IP2  AND 子网掩码=00000000.11000100.00111000.10100101  
3. 把得到的结果转换成十进制   
IP1的主机标识：0.196.132.54   
IP2的主机标识：0.196.56.165 

## 划分子网
示例：IP：192.160.12.50（这可以是网络号）子网掩码：255.255.255.192   

1. 把IP地址和子网掩码转换成二进制   
IP地址：11000000.10100000.00001100.00110010   
子网掩码：11111111.11111111.11111111.11000000 
2. 把IP地址和子网掩码进行AND运算 
因为掩码是255.255.255.192 ，因此它们之间的网段间隔是256-192=64  
可用主机数= 2^6-2 = 62。主机数减去2是因为要除去子网网络地址（主机号全0）和子网广播地址（主机号全1），每个子网的这两个地址都是保留不能分配给主机，所以要减去2。

子网网络地址（主机号全0）    
子网广播地址（主机号全1）    

第一个子网地址：11000000.10100000.00001100.00000000（192.160.12.0）  
第一个广播地址：11000000.10100000.00001100.00111111（192.160.12.63）

第二个子网地址：11000000.10100000.00001100.01000000（192.160.12.64）  
第二个广播地址：11000000.10100000.00001100.01111111 （192.160.2.127）  

第三个子网号：11000000.10100000.00001100.10000000（192.160.12.128）  

第四个子网号：11000000.10100000.00001100.11000000（192.160.12.192）  

~~这个网段可以划分出4个子网，但只有2个可用子网 ：192.160.12.64和192.160.12.128~~

至于子网个数减去2是因为很早以前的网络设备跟相关协议是不支持子网号全0跟全1，里面会出现地址重叠的现象。但是这都是很久以前的老书上这样的算法，现在一般都是不用减去2的，网络设备跟相关协议能都区分全0跟全1子网号了。

# CIDR构造超网

英文缩写: CIDR (Classless InterDomain Routing)

中文译名: 无类别域间路由选择

分 类: 网络与交换

读 音："sider"

解 释: 现行的IPv4（网际协议第4版）的地址已经耗尽，这是一种为解决地址耗尽而提出的一种措施。它是将好几个IP网络结合在一起，使用一种无类别的域际路由选择算法，可以减少由核心路由器运载的路由选择信息的数量。

所有发送到这些地址的信息包都被送到如MCI或Sprint等ISP。1990年，Internet上约有2000个路由。五年后，Internet上有3万多个路由。如果没有CIDR，路由器就不能支持Internet网站的增多。

CIDR采用8~30位可变网络ID，而不是A-B-C类网络ID所用的固定的8、16和24位。

### 基本思想

适当分配多个合适的IP地址，使得这些地址能够进行聚合，减少这些地址在路由表中的表项数。

例如，给某个网络分配16个C类地址，采用适当的方法分配这些地址，使得16个地址能够聚合成一个地址。

“无分类”指不考虑IP地址所属的类别，路由的策略完全基于整个32bit IP地址的掩码来操作。

### 例子
例如一个ISP被分配了一些C类网络，这个ISP准备把这些C类网络分配给各个用户群，已经分配了三个C类网段给用户。

如果没有实施CIDR技术，ISP的路由器的路由表中会有三条下连网段的路由条目，并且会把它通告给Internet上的路由器。

通过实施CIDR技术，我们可以在ISP的路由器上把这三个网段198.168.1.0，198.168.2.0，198.168.3.0汇聚成一条路由198.168.0.0/16。
这样ISP路由器只向Internet通告198.168.0.0/16这一条路由，大大减少了路由表的数目，从而为网络路由器节省出了存储空间。

值得注意的是，使用CIDR技术汇聚的网络地址的比特位必须是一致的。如上例所示，如果上例所示的ISP连接了一个172.178.1.0网段,这些网段路由将无法汇聚，无法实现CIDR技术。

## 参考文献
- [划分子网为什么要减2？](https://zhidao.baidu.com/question/936470364154642932.html)
